---
title: "新建公有云VPC"
date: 2022-01-04T14:48:51+08:00
weight: 20
description: >
    新建公有云平台VPC
---

请确保已添加对应公有云平台的云账号。

{{% alert title="注意" color="warning" %}}
- {{<oem_name>}}平台上全局VPC对应Google平台的VPC；VPC对应Google平台的IP子网。因此在{{<oem_name>}}平台新建Google平台VPC即在Google平台VPC下新建IP子网。
{{% /alert %}}

### 操作步骤

1. 在左侧导航栏，选择 **_"网络/基础网络/VPC"_** 菜单项，进入VPC页面。
2. 单击顶部“公有云”页签，单击列表上方 **_"新建"_** 按钮，进入新建公有云平台VPC页面。
2. 配置以下信息：
   - 指定域：选择VPC的所属域。
   - 名称：设置VPC的名称。
   - 备注：设置VPC的备注信息。
   - 区域：选择VPC所属的区域。可通过城市、平台快速过滤筛选出合适区域。
   - 目标网段：设置VPC网络的专用网段，VPC下的IP子网必须使用该网段下的地址。不同公有云支持的目标网段范围不同。详情请参考[公有云平台VPC和IP子网的支持范围](#公有云平台vpc和ip子网的支持范围)。
   - 允许外网访问：当VPC启用外网访问后，VPC下的IP子网都可以通过绑定EIP的方式访问外网。除AWS平台外的公有云平台默认都允许，且不允许修改。当AWS平台VPC不允许外网访问时，使用VPC下IP子网创建的虚拟机不支持绑定EIP，当AWS平台VPC允许外网访问时，将会在AWS平台同步创建互联网网关以及到互联网网关的路由表，使用VPC下IP子网创建的虚拟机可以通过绑定EIP访问外网。
   - 指定云订阅：选择具体创建VPC的云订阅。
   - 全局VPC：仅选择Google平台时需设置该项，即选择Google平台的VPC中创建IP子网。
   - 标签：支持为新建的VPC绑定标签。支持选择已有标签和新建标签。
        - 新建标签：单击列表上方 **_新建_** 按钮，设置标签键和标签值，单击 **_"添加"_** 按钮，新建标签并绑定到资源上。
        - 选择已有标签：单击 **_"已有标签"_** 按钮，选择标签键和值。
3. 单击 **_"确定"_** 按钮，完成操作。

### 公有云平台VPC和IP子网的支持范围

| 平台 | VPC 目标网段掩码范围 | IP 子网网段范围 |
|-----|---------|--------|
| 阿里云 | 10.0.0.0/8~24 <br> 172.16.0.0/12~24 <br> 192.168.0.0/16~24| 10.0.0.0/16~29 <br> 172.16.0.0/16~29 <br> 192.168.0.0/17~29 |
| 腾讯云 | 10.0.0.0/16~28 <br> 172.16.0.0/16~28 <br> 192.168.0.0/16~28 | 10.0.0.0/16~29 <br> 172.16.0.0/16~29 <br> 192.168.0.0/17~29 |
| 华为云 | 10.0.0.0/8~24 <br> 172.16.0.0/12~24 <br> 192.168.0.0/16~24| 10.0.0.0/9~29 <br> 172.16.0.0/13~29 <br> 192.168.0.0/17~29 |
| UCloud | 10.0.0.0/8~29 <br> 172.16.0.0/12~29 <br> 192.168.0.0/16~29| 10.0.0.0/9~29 <br> 172.16.0.0/13~29 <br> 192.168.0.0/17~29 |
| AWS | 掩码范围：16~28 <br> 支持公网私用，但不推荐 | 子网掩码范围： 16~28 |
| Azure | 掩码范围：8~29 <br> 支持公网私用，但不推荐   | 子网掩码范围： 8~29 |
| Google | | 子网掩码范围： 8~29 |

云管平台默认不支持公网私用，会将这类网段判断为公网IP，并占用公网IP的配额。如用户有公网私用的需求，可以通过修改配置文件，兼容公网私用的网段。

```bash
$ climc service-config-edit common

default:
  api_server: https://10.127.190.254
  # 在配置文件中添加公网私用的网段
  customized_private_prefixes: 
  - 52.0.0.0/16
  - 54.0.0.0/16
  enable_quota_check: true
  non_default_domain_projects: true

```