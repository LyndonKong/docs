---
title: "升级相关"
edition: ee
weight: 100
description: >
    介绍var_oem_name产品如何进行升级操作。
---

## 升级介绍

本文档介绍{{<oem_name>}} 从v3.7.x升级到v3.8.x，以及v3.8.x升级到v3.8.y（y大于x）的步骤以及升级方法。

跨版本升级建议从相邻的版本升级，如从3.6.x升级到3.8.x，需要以下步骤

1. 从3.6.x升级到3.7.x
3. 从3.7.x升级到3.8.x

{{% alert title="注意" color="warning" %}}
- 升级过程中将会同时升级控制节点和计算节点，请在空余时间执行升级操作。
{{% /alert %}}

## 从3.7.x升级到3.8.x

跨版本升级目前仅支持命令行升级。该方式对用户环境无网络要求，通过挂载安装包，执行升级命令的方式进行升级操作。

### 命令行升级步骤

1. 管理员通过ssh工具以root用户远程登录到控制节点。

2. 自3.7版本后，只允许使用root用户进行升级操作。

3. 将高版本的DVD安装包上传到控制节点，挂载后执行升级命令。

    ```bash
    # 将高版本的DVD安装包挂载到mnt目录
    $ mount -o loop Yunion-x86_64-DVD-3.x-x.iso /mnt 
    # 切换到/mnt/yunion目录 
    $ cd /mnt/yunion
    $ ./upgrade.sh
    ```

4. 升级成功后用户可以打开{{<oem_name>}} web控制台的关于页面查看版本信息或执行以下命令查看产品版本是否符合预期。

    ```bash
    $ kubectl get oc -n onecloud default -o go-template --template='{{printf "%s\n" .spec.version}}'
    v3.8.0
    ```


## 从3.8.x升级到3.8.y

从3.8.x升级到3.8.y，除命令行升级外还支持界面升级。

### 命令行升级步骤

同[从3.7.x升级到3.8.x-命令行升级](#命令行升级步骤)

### 界面升级步骤

界面升级即在{{<oem_name>}}平台的关于页面中通过版本更新功能将平台升级。该功能要求用户环境可以访问公网，且只允许在管理后台视图下执行界面升级的操作。

1. 在管理后台视图下，单击![](../images/more.png)图标，选择下拉菜单 **_"关于"_** 菜单项，进入关于页面。

    ![](../images/about.png)

2. 单击 **_"版本更新"_** 按钮，弹出版本更新对话框。
   
    ![](../../../user/images/intro/upgradetip1.png)

3. 选择需要升级的版本，并选择更新方式。
    - 立即更新：更新方式选择“立即更新”，单击 **_"确定"_** 按钮。
    - 预约更新：更新方式选择“预约更新”，并设置具体的时间点，单击 **_"确定"_** 按钮。产品将会在预约的时间点进行更新操作，在未更新之前，支持取消预约更新，单击 **_"取消"_** 按钮，在弹出的操作确认对话框中单击<确定>按钮。



